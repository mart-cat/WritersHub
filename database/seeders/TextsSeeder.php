<?php

namespace Database\Seeders;

use App\Models\Category;
use App\Models\Genre;
use App\Models\Text;
use App\Models\User;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class TextsSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Получаем авторов
        $watson = User::where('name', 'Джон Ватсон')->first();
        $nick = User::where('name', 'Ник Кэрроуэй')->first();
        $humbert = User::where('name', 'Гумберт Гумберт')->first();

        // Получаем жанры и категории
        $genreFiction = Genre::where('name', 'Фантастика')->first();
        $genreRomance = Genre::where('name', 'Романтика')->first();
        $genreDrama = Genre::where('name', 'Драма')->first();

        $categoryMystery = Category::where('name', 'Магия')->first();
        $categoryAdventure = Category::where('name', 'Альтернативная вселенная')->first();
        $categoryRomance = Category::where('name', 'Любовь')->first();


        Text::create([
            'user_id' => $watson->id,
            'title' => 'Дело с последним словом',
            'description' => 'Рассказ о последних днях Шерлока Холмса, рассказываемый его другом, Джоном Ватсоном.',
            'content' => 'Шерлок Холмс всегда был человеком, который не оставлял никаких дел незавершёнными. В конце своей жизни, когда ему казалось, что все его самые выдающиеся расследования остались позади, он столкнулся с последним, одним из самых сложных дел. Это было не просто расследование, это была битва разума, которая, казалось, не имела ни конца, ни начала. На этом фоне Джон Ватсон, который был верным другом Холмса, не только помогал ему, но и стал тем, кто рассказывал об этом деле в своих воспоминаниях... Это была история о том, как Холмс смог раскрыть тайну, которая была спрятана под самыми сложными запутанными следами и неверными предположениями.',
            'genre_id' => $genreFiction->id,
            'category_id' => $categoryMystery->id,
            'tags' => json_encode(['Шерлок Холмс', 'расследование', 'дружба']),
            'status' => 'completed',
            'size' => 'standard',
            'char_count' => 10000,
            'chapter_count' => 5,
            'warnings' => '',
            'age_rating' => '12+',
            'dedication' => 'Для моего верного друга Шерлока.',
            'publication_permission' => 'author_only',
            'last_updated' => now(),
        ]);

        Text::create([
            'user_id' => $watson->id,
            'title' => 'Шерлок и я',
            'description' => 'Собрание самых удивительных историй о Шерлоке Холмсе и его верном друге, докторе Ватсоне.',
            'content' => 'С каждым новым расследованием, Шерлок Холмс и я становились всё более неразлучными. Мы находили разгадки в самых неожиданных местах, и я, как его верный спутник, всегда был рядом. В этих историях собраны наши самые необычные приключения, которые мы пережили, расследуя убийства, исчезновения, преступления, которые ставили нас перед лицом самых крупных тайны. Шерлок не только решал загадки, он заставлял меня верить в невозможное и бросать вызов всему, что казалось очевидным. Мы были командой, и эти истории — это наше наследие, которое я хочу оставить для всех тех, кто когда-либо сомневался в силе разума и дружбы.',
            'genre_id' => $genreFiction->id,
            'category_id' => $categoryAdventure->id,
            'tags' => json_encode(['Шерлок Холмс', 'дружба', 'приключения']),
            'status' => 'in progress',
            'size' => 'maxi',
            'char_count' => 25000,
            'chapter_count' => 10,
            'warnings' => '',
            'age_rating' => '16+',
            'dedication' => 'Для самых невероятных приключений.',
            'publication_permission' => 'allowed',
            'last_updated' => now(),
        ]);

        // Произведения для Ника Кэрроуэя (персонаж из "Великого Гэтсби")
        Text::create([
            'user_id' => $nick->id,
            'title' => 'Однажды в Нью-Йорке',
            'description' => 'История о том, как события в Нью-Йорке повлияли на судьбы людей.',
            'content' => 'Нью-Йорк — это город, который никогда не спит, но за этой бездушной энергией скрываются настоящие человеческие драмы. Всё, что происходило в этом городе, всегда имело свои последствия. Эта история рассказывает о том, как судьбы людей переплетались в этом хаосе. Люди, которые стремились найти счастье, но не всегда получали то, что хотели. Несколько встреч с незнакомыми людьми, несколько трагедий, несколько любовных историй. Всё это произошло в одном городе, в одно мгновение, и навсегда изменило жизни тех, кто в этом оказался.',
            'genre_id' => $genreDrama->id,
            'category_id' => $categoryRomance->id,
            'tags' => json_encode(['любовь', 'трагедия', 'дружба']),
            'status' => 'completed',
            'size' => 'mini',
            'char_count' => 8000,
            'chapter_count' => 4,
            'warnings' => 'Содержит сцены насилия',
            'age_rating' => '18+',
            'dedication' => 'Для всех потерянных душ, которые нашли друг друга.',
            'publication_permission' => 'author_only',
            'last_updated' => now(),
        ]);

        Text::create([
            'user_id' => $nick->id,
            'title' => 'Загадка Гэтсби',
            'description' => 'Романтическая история о человеке, который был готов на все ради своей мечты.',
            'content' => 'Гэтсби был загадкой. Для всех, кто его знал, его жизнь была лишь набором противоречий. Он был человеком, который был готов на всё ради своей мечты, но в то же время сам был её жертвой. Он стремился к совершенству, но в погоне за ним потерял всё, что было ему дорого. Эта история — не просто о человеке, это история о том, как мечта может стать тенью, которая постепенно поглощает тебя, не оставляя ничего, кроме пустоты. Мы все, так или иначе, стали частью этой загадки, и то, что произошло в итоге, оставило неизгладимый след в наших сердцах.',
            'genre_id' => $genreRomance->id,
            'category_id' => $categoryRomance->id,
            'tags' => json_encode(['любовь', 'мечта', 'жертвенность']),
            'status' => 'in progress',
            'size' => 'standard',
            'char_count' => 12000,
            'chapter_count' => 6,
            'warnings' => '',
            'age_rating' => '16+',
            'dedication' => 'Для того, кто все-таки остался в тени.',
            'publication_permission' => 'allowed',
            'last_updated' => now(),
        ]);

        // Произведения для Гумберта Гумберта (персонаж из "Лолиты")
        Text::create([
            'user_id' => $humbert->id,
            'title' => 'Судьба Лолиты',
            'description' => 'История сложных и запретных отношений, основанная на реальных событиях.',
            'content' => 'Я встретил её, когда она была ещё ребёнком. Но она не была как другие дети. Она была живым воплощением моей мечты, моей запретной любви. В её глазах я видел отражение всего, чего я когда-либо желал, и всё, чего я когда-либо боялся. Но этот путь был не только о любви — это был путь страха, стыда и вины, который вёл нас к трагическому исходу. Лолита... моя Лолита, она была символом всего того, что я когда-либо потерял и что я не мог забыть. Это была не просто история любви, это была трагедия, которую я сам создал.',
            'genre_id' => $genreRomance->id,
            'category_id' => $categoryRomance->id,
            'tags' => json_encode(['любовь', 'запрещенная любовь', 'психология']),
            'status' => 'completed',
            'size' => 'maxi',
            'char_count' => 30000,
            'chapter_count' => 12,
            'warnings' => 'Содержит сцены насилия и взрослые темы',
            'age_rating' => '18+',
            'dedication' => 'Для тех, кто поймет.',
            'publication_permission' => 'forbidden',
            'last_updated' => now(),
        ]);

        Text::create([
            'user_id' => $humbert->id,
            'title' => 'Письма Лолите',
            'description' => 'Собрание писем, написанных Гумбертом Гумбертом своей возлюбленной.',
            'content' => 'Каждое письмо — это моя душа, моя жертва, моя любовь... Письма, которые я писал Лолите, были не просто словами, это были крики, которые я не мог услышать. В этих письмах я пытался объяснить, что произошло, почему я любил её, и почему это было моим самым большим преступлением. Лолита, моя Лолита, ты никогда не узнаешь, как много я ждал и страдал, когда ты была рядом. Но даже если бы ты узнала, не изменилось бы ничего. Я был обречён на страдания, и они были моими. Всё, что я мог сделать, это писать тебе эти письма...',
            'genre_id' => $genreDrama->id,
            'category_id' => $categoryMystery->id,
            'tags' => json_encode(['любовь', 'письма', 'психологический триллер']),
            'status' => 'frozen',
            'size' => 'standard',
            'char_count' => 15000,
            'chapter_count' => 8,
            'warnings' => 'Содержит сцены насилия и психологические аспекты',
            'age_rating' => '18+',
            'dedication' => 'Для Лолиты, которая никогда не знала моей любви.',
            'publication_permission' => 'author_only',
            'last_updated' => now(),
        ]);

    }
}
